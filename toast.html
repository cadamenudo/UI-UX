<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Recordatorios ‚Äî Cada Menudo</title>
<link rel="stylesheet" href="https://cadamenudo.github.io/UI-UX/css-fonts.css"/>
<style>
:root{
  --cm-primary:#3956E8; --cm-secondary:#7459D9; --cm-accent:#E8C239;
  --cm-bg:#f7f8fa; --cm-text:#111; --cm-muted:#64748B; --cm-border:#e5e7eb;
  --radius:16px;
}
*{box-sizing:border-box}
body{font-family:'Greycliff CF',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial; margin:0; background:var(--cm-bg); color:var(--cm-text)}
.header{position:sticky; top:0; z-index:20; background:#fff; border-bottom:1px solid var(--cm-border); padding:14px 16px; display:flex; gap:10px; align-items:center; justify-content:space-between}
.header h1{margin:0; font-size:1.1rem}
.btn{background:var(--cm-primary); color:#fff; border:none; border-radius:999px; padding:.7rem 1rem; font-weight:700; cursor:pointer; box-shadow:0 6px 18px rgba(57,86,232,.25)}
.btn-outline{background:#fff; color:var(--cm-primary); border:2px solid var(--cm-primary)}
.container{max-width:820px; margin:10px auto; padding:0 12px 80px}
.section{margin:18px 0}
.section h2{margin:8px 4px 10px; font-size:.95rem; color:#334155}
.card{background:#fff; border:1px solid var(--cm-border); border-radius:14px; padding:12px; display:flex; align-items:center; justify-content:space-between; gap:10px; margin:10px 0; box-shadow:0 4px 14px rgba(2,6,23,.04)}
.left{display:flex; align-items:flex-start; gap:12px}
.dot{width:14px; height:14px; border-radius:999px; background:var(--cm-secondary); margin-top:6px; flex:0 0 auto}
.meta{font-size:.85rem; color:var(--cm-muted)}
.title{font-weight:800}
.badges{display:flex; gap:6px; flex-wrap:wrap; margin-top:4px}
.badge{font-size:.75rem; padding:.15rem .5rem; border-radius:999px; border:1px solid var(--cm-border); color:#334155; background:#f9fafb}
.actions{display:flex; gap:6px}
.iconbtn{border:1px solid var(--cm-border); background:#fff; padding:.45rem .6rem; border-radius:10px; cursor:pointer}
.iconbtn.danger{border-color:#fecaca; color:#b91c1c}
.empty{background:#fff; border:1px dashed var(--cm-border); padding:22px; border-radius:14px; text-align:center; color:var(--cm-muted)}
.toast{position:fixed; right:16px; bottom:86px; background:#111; color:#fff; padding:.8rem 1rem; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.25); opacity:0; transform:translateY(12px); pointer-events:none}
.toast.show{opacity:1; transform:translateY(0); transition:opacity .2s, transform .2s}

/* ===== Toast de reminder (5 min antes) ===== */
.toast-reminder{
  position:fixed; 
  bottom:20px; right:20px; 
  background:#3956E8; 
  color:#fff; 
  padding:1rem 1.25rem; 
  border-radius:14px; 
  box-shadow:0 6px 20px rgba(0,0,0,.25); 
  opacity:0; 
  transform:translateY(12px); 
  pointer-events:none; 
  transition:opacity .3s, transform .3s;
  z-index:10000;
  font-weight:700;
  max-width:92vw;
}
.toast-reminder.show{ opacity:1; transform:translateY(0); }
.toast-reminder .line{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
.toast-reminder .line b{font-weight:800}
.toast-reminder button{
  background:#fff; 
  color:#3956E8; 
  border:none; 
  border-radius:8px; 
  margin-left:10px; 
  padding:6px 10px; 
  cursor:pointer;
}

/* ===== Modal ===== */
.overlay{position:fixed; inset:0; background:rgba(17,24,39,.48); display:none; z-index:9998}
.overlay.show{display:block}
.modal{position:fixed; inset:0; display:grid; place-items:center; z-index:9999; padding:16px; pointer-events:none}
.modal.show{pointer-events:auto}
.sheet{width:min(720px,100%); background:#fff; border-radius:var(--radius);
  box-shadow:0 24px 80px rgba(2,6,23,.30); overflow:hidden; transform:translateY(12px); opacity:0;
  transition:transform .2s ease, opacity .2s ease;}
.modal.show .sheet{transform:translateY(0); opacity:1}
.hdr{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:16px 18px; border-bottom:1px solid var(--cm-border)}
.hdr h3{margin:0; font-size:1.05rem}
.body{padding:16px 18px}
.grid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
@media (max-width:720px){ .grid{grid-template-columns:1fr} }
.field{display:flex; flex-direction:column; gap:6px}
label{font-size:.9rem; color:var(--cm-muted); font-weight:700}
input[type="text"], input[type="date"], input[type="time"], select, textarea{
  width:100%; border:1px solid var(--cm-border); border-radius:12px; padding:.7rem .85rem; font:inherit; background:#fff;
}
textarea{min-height:90px}
.days{display:flex; gap:6px; flex-wrap:wrap}
.day{width:36px; height:36px; display:grid; place-items:center; border:1px solid var(--cm-border); border-radius:10px; cursor:pointer; user-select:none; font-weight:700; color:var(--cm-muted); background:#fff}
.day[aria-pressed="true"]{background:var(--cm-primary); color:#fff; border-color:var(--cm-primary)}
.ft{display:flex; gap:10px; justify-content:flex-end; align-items:center; padding:12px 14px; border-top:1px solid var(--cm-border); background:#fff}
.btn-ghost{background:transparent; border:none; color:var(--cm-muted); cursor:pointer}
.req{color:#ef4444}
</style>
</head>
<body>

<!-- Header -->
<div class="header">
  <h1>Recordatorios</h1>
  <button class="btn" id="btn-new">+ Nuevo</button>
</div>

<!-- Content -->
<div class="container" id="list"></div>

<!-- Empty state -->
<template id="tpl-empty">
  <div class="empty">
    <p><strong>Sin recordatorios</strong></p>
    <p>Presiona ‚ÄúNuevo‚Äù para crear tu primer reminder.</p>
  </div>
</template>

<!-- Item template -->
<template id="tpl-item">
  <div class="card" data-id="">
    <div class="left">
      <div class="dot" aria-hidden="true"></div>
      <div>
        <div class="title"></div>
        <div class="meta"></div>
        <div class="badges"></div>
      </div>
    </div>
    <div class="actions">
      <button class="iconbtn" data-act="edit" title="Editar">‚úé</button>
      <button class="iconbtn danger" data-act="delete" title="Eliminar">üóë</button>
    </div>
  </div>
</template>

<!-- Section template -->
<template id="tpl-section">
  <div class="section" data-group="">
    <h2></h2>
    <div class="items"></div>
  </div>
</template>

<!-- Toasts -->
<div class="toast" id="toast" role="status" aria-live="polite">Hecho ‚úÖ</div>
<div id="rem-toast" class="toast-reminder" aria-live="assertive" aria-atomic="true" hidden></div>

<!-- ===== Modal (crear/editar) ===== -->
<div class="overlay" id="ovl" hidden></div>
<div class="modal" id="mdl" role="dialog" aria-modal="true" aria-labelledby="ttl" hidden>
  <div class="sheet" role="document">
    <div class="hdr">
      <h3 id="ttl">Nuevo recordatorio</h3>
      <button class="btn-ghost" id="x" aria-label="Cerrar">‚úï</button>
    </div>
    <form class="body" id="frm">
      <input type="hidden" name="id" id="rem-id"/>
      <div class="grid">
        <div class="field">
          <label for="name">T√≠tulo <span class="req">*</span></label>
          <input id="name" name="name" type="text" required placeholder="Ej: Pagar tarjeta / Revisi√≥n presupuesto">
        </div>
        <div class="field">
          <label for="type">Tipo</label>
          <select id="type" name="type">
            <option value="custom">Personalizado</option>
            <option value="bill">Pago de factura</option>
            <option value="budget">Revisi√≥n de presupuesto</option>
            <option value="goal">Aporte a meta</option>
          </select>
        </div>
        <div class="field">
          <label for="date">Fecha <span class="req">*</span></label>
          <input id="date" name="date" type="date" required>
        </div>
        <div class="field">
          <label for="time">Hora <span class="req">*</span></label>
          <input id="time" name="time" type="time" required>
        </div>
        <div class="field">
          <label for="recur">Recurrencia</label>
          <select id="recur" name="recur">
            <option value="once">Una vez</option>
            <option value="daily">Diario</option>
            <option value="weekly">Semanal</option>
            <option value="monthly">Mensual</option>
            <option value="custom">Custom (elige d√≠as)</option>
          </select>
        </div>
        <div class="field" id="row-days" style="display:none">
          <label>D√≠as (si Custom)</label>
          <div class="days">
            <button type="button" class="day" data-day="MO" aria-pressed="false">L</button>
            <button type="button" class="day" data-day="TU" aria-pressed="false">M</button>
            <button type="button" class="day" data-day="WE" aria-pressed="false">X</button>
            <button type="button" class="day" data-day="TH" aria-pressed="false">J</button>
            <button type="button" class="day" data-day="FR" aria-pressed="false">V</button>
            <button type="button" class="day" data-day="SA" aria-pressed="false">S</button>
            <button type="button" class="day" data-day="SU" aria-pressed="false">D</button>
          </div>
        </div>
        <div class="field" style="grid-column:1/-1">
          <label for="notes">Notas</label>
          <textarea id="notes" name="notes" placeholder="Detall
